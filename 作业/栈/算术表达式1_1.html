<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>算术表达式</title>
    <script src="Stack.js"></script>
</head>
<body>

</body>
<script>
    String.prototype.forEach = function(call) {
        var length = this.length;
        for(var i=0;i<length;i++) {
            call(this[i]);
        }
    }

    var stack = new Stack();

    var arithmeti = "2.3 + 23 / 12 + (3.14159×0.24";

    var parentheses = "(";
    var brackets = "[";
    var Curlybraces = "{";

    var parentheses1 = ")";
    var brackets1 = "]";
    var Curlybraces1 = "}";

    function isType(type) {
        switch (type) {
            case parentheses:
                stack.push(parentheses);
                break;
            case brackets:
                stack.push(brackets);
                break;
            case Curlybraces:
                stack.push(Curlybraces);
                break;
        }
    }

    function isTrue(type) {
        switch (type) {
            case parentheses1:
                var buffer = stack.peek();
                if(buffer=="(") {
                    stack.pop();
                }
                else {
                    console.log("()括号不匹配")
                }
                break;
            case brackets1:
                var buffer = stack.peek();
                if(buffer=="[") {
                    stack.pop();
                }
                else {
                    console.log("[]括号不匹配")
                }
                break;
            case Curlybraces1:
                var buffer = stack.peek();
                if(buffer=="{") {
                    stack.pop();
                }
                else {
                    console.log("{}括号不匹配")
                }
                break;
        }
    }

    arithmeti.forEach(function (item) {
        this.isType(item);
        this.isTrue(item);
    });

    if(stack.length()!=0) {
        console.log("括号不匹配");
    }
    else {
        console.log("括号匹配");
    }

</script>
</html>